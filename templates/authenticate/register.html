{% extends "base.html" %}


{% block body %}


<div class="container jumbotron">


    <form role="form" method="post" action="">
        {% csrf_token %}
        <style type="text/css"> 
            ul {
                list-style-type: none;
                color: red;
            } 
            .warning {
                color: red;
            }
        </style> 

        <fieldset class="form-group">
            <div class="col-md-5">
                {% if user_form.errors or profile_form.errors%}
                    Please fill out all required fields
                    <ul>
                        {% for error in user_form.errors %}
                            <li><strong>{{ error. }}</strong></li>
                        {% endfor %}
                        {% for error in profile_form.errors %}
                            <li><strong>{{ error }}</strong></li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            
        </fieldset>

        <fieldset class="form-group">
            <label for="username" class="col-md-2">Username<font color=red>*</font></label>
            <div class="col-md-5">
                <input id="username" name="username" class="form-control" type="text" placeholder="maximum of 30 characters" onblur="checkUsername()">
            </div>
            <div id="feedbackUser"></div>
        </fieldset>

        <fieldset class="form-group">
            <label for="emailInput" class="col-md-2">Email</label>
            <div class="col-md-5">
                <input id="emailInput" name="email" class="form-control" type="text" placeholder="optional; example@example.com">
            </div>
        </fieldset>
 
        <fieldset class="form-group">
            <label for="password" class="col-md-2">Password<font color=red>*</font></label>
            <div class="col-md-5">
                <input id="password" name="password" type="password" class="form-control">
            </div>
        </fieldset>

        <fieldset class="form-group">
            <label for="password2" class="col-md-2">Confirm Password<font color=red>*</font></label>
            <div class="col-md-5">
                <input id="password2" name="password2" type="password" class="form-control" onblur="checkPassMatch()">
            </div>
            <div id="feedbackPW2"></div>
        </fieldset>

        <fieldset class="form-group">
            <label for="first_name" class="col-md-2">First Name<font color=red>*</font></label>
            <div class="col-md-5">
                <input id="first_name" name="first_name" type="text" class="form-control" onblur="checkElement('first_name', 'feedbackFirst')">
            </div>
            <div id="feedbackFirst"></div>
        </fieldset>

        <fieldset class="form-group">
            <label for="last_name" class="col-md-2">Last Name<font color=red>*</font></label>
            <div class="col-md-5">
                <input id="last_name" name="last_name" type="text" class="form-control" onblur="checkElement('last_name', 'feedbackLast')">
            </div>
            <div id="feedbackLast"></div>
        </fieldset>

        <fieldset class="form-group">
            <label for="dobInput" class="col-md-2">Date of Birth<font color=red>*</font></label>
            <div class="col-md-5">
                <input id="dobInput" name="dob" type="date" class="form-control" placeholder="YYYY-MM-DD">
            </div>
        </fieldset>

        <fieldset class="form-group">
            <label for="genderInput" class="col-md-2">Gender</label>
            <div class="col-md-5">
                <label class="radio">
                    <input type="radio" name="gender" value="M">
                    Male
                </label>
                <label class="radio">
                    <input type="radio" name="gender" value="F">
                    Female
                </label>
                <label class="radio">
                    <input type="radio" name="gender" value="U" checked>
                    Prefer Not to Answer
                </label>
            </div>
        </fieldset>

        <fieldset class="form-group">
            <label for="pictureInput" class="col-md-2">Upload Image</label>
            <div class="col-md-5">
                <input id="PictureInput" name="picture" type="file" class="form-control">
            </div>
        </fieldset>

        <fieldset class="form-group">
            <div class="col-md-5">
                <input id="timezone" name="timezone" type="hidden" class="form-control">
            </div>
        </fieldset>

        <fieldset class="form-group">
            <div class="col-md-5">
                <input type="submit" name="submit" id="submit" value="Register" class="btn btn-primary" onload="checkAll()"/>
            </div>
            <font color=red>*</font> Denotes required field
        </fieldset>

        <script type="text/javascript">

            function checkUsername() {
                var elUser = document.getElementById('username');
                var UserMsg = document.getElementById('feedbackUser');
                var username = elUser.value;
                if (username.length < 5) {
                    UserMsg.className = 'warning';
                    UserMsg.textContent = 'Username must be at least 5 characters';
                } else if (username.length > 20) {
                    UserMsg.className = 'warning';
                    UserMsg.textContent = 'Username must be less than 20 characters';
                    valid = false;
                } else {
                    UserMsg.textContent = '';
                    valid = true;
                }
            }

            function checkPassMatch() {
                var password = document.getElementById('password');
                var confirm = document.getElementById('password2');
                var PWMsg = document.getElementById('feedbackPW2');
                if (password.value == confirm.value) {
                    PWMsg.textContent = '';
                    valid = true;
                }
                else {
                    PWMsg.className = 'warning';
                    PWMsg.textContent = 'Passwords Do Not Match';
                    valid = false;
                }
            }

            function checkElement(element, feedback) {
                var elChecked = document.getElementById(element);
                var CheckedMsg = document.getElementById(feedback);
                var elCheck = elChecked.value;
                if (elCheck.length < 1) {
                    CheckedMsg.className = 'warning';
                    CheckedMsg.textContent = 'Required Field';
                    valid = false;
                } else {
                    CheckedMsg.textContent = '';
                    valid = true;
                }
            }

            function checkAll() {
                window.onload
                if (valid) document.getElementById("submit").disabled = true;
                else document.getElementById("submit").disabled = true;
            }
  
            var date = new Date();
            document.getElementById('timezone').value = date.getTimezoneOffset();

        </script>
    </form>
</div>
{% endblock %}

